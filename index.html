<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<meta name="theme-color" content="#2563eb"/>
<title>JasperGYM</title>

<style>
:root{
  --bg:#91C6FF; --panel:#fff; --ink:#0f172a; --muted:#64748b;
  --brand:#2563eb; --ok:#16a34a; --warn:#f59e0b; --danger:#ef4444;
  --border:#d1d5db; --field:#fff;
}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font:14px/1.6 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Noto Sans CJK SC","Helvetica Neue",Arial;
}

/* 容器 */
.wrap{ max-width:1100px; margin:0 auto; padding:16px 16px 140px }

/* 顶部条 */
.header{ background:transparent }
.headerbar{
  display:grid; grid-template-columns:1fr; gap:12px;
  background:transparent;
}

/* 标题 + 云端/导航按钮两组（两排都统一为 4 列网格） */
.leftgrp, #tabs{
  display:grid !important;
  grid-template-columns: repeat(4, 1fr) !important;
  column-gap:8px !important; row-gap:8px !important;
  width:100% !important;
  justify-items:stretch !important; align-items:stretch !important;
}

.appTitle{ font-weight:800; font-size:18px; }

/* 顶部按钮基础样式（两排统一） */
.gbtn{
  appearance:none; background:#fff; color:#111;
  border:1px solid var(--border);
  border-radius:12px;
  padding:0 16px; height:40px; line-height:40px;
  display:inline-flex; align-items:center; justify-content:center; gap:6px;
  font-weight:700; cursor:pointer; user-select:none; white-space:nowrap;
}
.gbtn:hover{ background:#f8fafc }
.gbtn:active{ transform:translateY(1px) }
.gbtn[disabled]{ opacity:.55; cursor:not-allowed }

/* —— 你的 6 条 CSS 指令：严格按要求替换 —— */

/* 1) 首页“进入训练页”按钮对齐修正 */
#page-home .row.auto.vm-notes{
  display:grid;
  grid-template-columns: 1fr 140px; /* ← 从 1fr auto 改为 1fr 140px */
  gap:12px; align-items:center;
}

/* 2) 设置页视频管理区域对齐 */
#vmRowTop, #vmRowNotes{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr 140px; /* ← 从 ... auto 改为 140px */
  gap:12px; align-items:end;
}

/* 3) 倒计时设置区域 */
#timerRow, #brandRow{
  display:grid;
  grid-template-columns: 1fr 1fr 140px; /* ← 从 ... auto 改为 140px */
  gap:12px; align-items:end;
}

/* 4) 统一设置页行内垂直居中 */
#page-settings .row.auto { align-items: center; } /* ← 从 end 改为 center */

/* 5) 移动端适配（按你的版本保持列=1 & 拉伸对齐） */
@media (max-width: 900px) {
  #page-home .row.auto.vm-notes,
  #vmRowTop, #vmRowNotes,
  #timerRow, #brandRow {
    grid-template-columns: 1fr;
    align-items: stretch;
  }
  #page-settings .card:last-child .row.auto .btn { min-width: 100%; }
  #vmRowNotes .field.notes { grid-column: 1; }
}

/* 6) 统一操作按钮内边距/高度 */
#page-settings .row.auto .btn,
#page-settings .row.auto .gbtn,
#refVideoRow #openVideo.gbtn{
  padding:0 16px !important;
  height:40px !important;
  line-height:40px !important;
}

/* —— 本次新增：强制隐藏两个“链接云端”按钮（双保险） —— */
.hide-btn{ display:none !important }
/* 直接按 ID 切断显示（防止级联覆盖） */
#btnVerify, #btnPing{ display:none !important }

/* 其他通用 */
.card{
  background:var(--panel); border:1px solid var(--border);
  border-radius:16px; padding:16px;
}
.row.auto{ display:grid; gap:12px; align-items:center }
.field{
  display:flex; align-items:center; gap:8px;
  background:var(--field); border:1px solid var(--border);
  border-radius:12px; padding:8px 12px; min-height:40px;
}
input[type="text"], input[type="number"], select, textarea{
  width:100%; border:0; outline:none; background:transparent;
  font:inherit; color:inherit;
}
.tiny{ font-size:12px; color:var(--muted) }
.hide{ display:none !important }

/* 首页示意 */
.choices{ display:grid; grid-template-columns:repeat(auto-fit, minmax(140px,1fr)); gap:12px }
.choice{
  display:flex; align-items:center; gap:8px;
  background:#fff; border:1px solid var(--border); border-radius:12px;
  padding:12px; cursor:pointer;
}
.choice .name{ font-weight:700 }

/* 顶部状态（点位/文案可隐藏；本次默认隐藏掉） */
#cloudDot, #cloudText, .appTitle { display:none !important; }

</style>
</head>
<body>

<div class="wrap">
  <div class="header">
    <div class="headerbar">

      <!-- 左：云端按钮（第一排） ———— 只保留 4 个 -->
      <div class="leftgrp">
        <!-- 被隐藏（ID 强制 + class 双保险） -->
        <button class="gbtn hide-btn" id="btnVerify">验证云端</button>
        <button class="gbtn hide-btn" id="btnPing">云端连接</button>

        <!-- 第一排保留的 4 个按钮（与第二排一致尺寸） -->
        <button class="gbtn navbtn" id="btnLoad"  disabled>云端读取</button>
        <button class="gbtn navbtn" id="btnSave"  disabled>云端保存</button>
        <button class="gbtn navbtn" id="btnReadJson">读取JSON</button>
        <button class="gbtn navbtn" id="btnSaveJson">保存JSON</button>

        <!-- 状态点/文案（已整体隐藏） -->
        <input type="file" id="jsonFilePicker" class="hide" accept=".json"/>
        <span class="dot" id="cloudDot"></span>
        <span id="cloudText" class="tiny">未连接</span>
      </div>

      <!-- 右：与云端按钮同尺寸的导航（第二排） -->
      <div class="leftgrp" id="tabs">
        <button class="gbtn navbtn active" data-page="home">🏠 首页</button>
        <button class="gbtn navbtn" data-page="work">💪 训练</button>
        <button class="gbtn navbtn" data-page="logs">📘 日志</button>
        <button class="gbtn navbtn" data-page="settings">⚙️ 设置</button>
      </div>

    </div>
  </div>

  <!-- ========= 页面：首页 ========= -->
  <div id="page-home">
    <div class="card">
      <div class="row auto vm-notes">
        <div class="field">
          <div class="tiny">进入训练页文案 / 说明</div>
        </div>
        <button class="gbtn" id="goWork">进入训练页</button>
      </div>
    </div>
  </div>

  <!-- ========= 页面：训练 ========= -->
  <div id="page-work" class="hide">
    <div class="card">
      <div id="vmRowTop">
        <div class="field"><input id="workTitle" placeholder="训练标题"/></div>
        <div class="field"><select id="workPart"><option value="chest">胸</option><option value="back">背</option></select></div>
        <div class="field"><input id="workUrl" placeholder="视频链接 / YouTube"/></div>
        <button class="gbtn btn ok" id="btnAddVideo">添加</button>
      </div>

      <div id="vmRowNotes" style="margin-top:12px">
        <div class="field notes"><textarea id="workNotes" placeholder="训练注意事项..."></textarea></div>
        <div class="field"><input id="refVideo" placeholder="参考视频URL"/></div>
        <div class="field"><input id="refTitle" placeholder="参考视频标题"/></div>
        <button class="gbtn btn ok" id="openVideo">打开视频</button>
      </div>

      <div id="timerRow" style="margin-top:12px">
        <div class="field"><input type="number" id="countdown" placeholder="倒计时(秒)" min="0"/></div>
        <div class="field"><input type="number" id="rest" placeholder="组间休息(秒)" min="0"/></div>
        <button class="gbtn btn ok" id="btnTimerSave">保存计时设置</button>
      </div>

      <div id="brandRow" style="margin-top:12px">
        <div class="field"><input id="brandName" placeholder="品牌文案"/></div>
        <div class="field"><input id="brandColor" placeholder="#品牌色"/></div>
        <button class="gbtn btn ok" id="btnBrandSave">保存外观</button>
      </div>
    </div>
  </div>

  <!-- ========= 页面：日志 ========= -->
  <div id="page-logs" class="hide">
    <div class="card">
      <div class="row auto">
        <div class="field"><input id="logFilter" placeholder="筛选关键字"/></div>
        <button class="gbtn btn ok" id="toggleAddLog">添加日志</button>
      </div>
      <div id="addEditBox" class="hide" style="margin-top:12px">
        <div class="row auto">
          <div class="field"><input id="editTitle" placeholder="标题"/></div>
          <div class="field"><textarea id="editContent" placeholder="内容"></textarea></div>
          <button class="gbtn btn ok" id="saveLog">保存</button>
          <button class="gbtn" id="cancelEdit">取消</button>
        </div>
      </div>
      <div id="logList" style="margin-top:12px"></div>
    </div>
  </div>

  <!-- ========= 页面：设置 ========= -->
  <div id="page-settings" class="hide">
    <div class="card">
      <div class="row auto">
        <div class="field"><input id="cloudBase" placeholder="Cloudflare Worker Base URL"/></div>
        <button class="gbtn btn ok" id="btnVerify2">验证（内部）</button>
      </div>

      <!-- 你的视频管理区域 & 其他设置，结构已按上面 2/3/4 点统一 -->
      <div id="vmRowTop" style="margin-top:12px">
        <div class="field"><input placeholder="视频标题"/></div>
        <div class="field"><select><option>胸</option><option>背</option></select></div>
        <div class="field"><input placeholder="视频URL"/></div>
        <button class="gbtn btn ok">添加</button>
      </div>

      <div id="vmRowNotes" style="margin-top:12px">
        <div class="field notes"><textarea placeholder="注意事项"></textarea></div>
        <div class="field"><input placeholder="参考URL"/></div>
        <div class="field"><input placeholder="参考标题"/></div>
        <button class="gbtn btn ok" id="openVideo2">打开</button>
      </div>

      <div id="timerRow" style="margin-top:12px">
        <div class="field"><input placeholder="倒计时(秒)"/></div>
        <div class="field"><input placeholder="休息(秒)"/></div>
        <button class="gbtn btn ok">保存计时设置</button>
      </div>

      <div id="brandRow" style="margin-top:12px">
        <div class="field"><input placeholder="品牌文案"/></div>
        <div class="field"><input placeholder="#品牌色"/></div>
        <button class="gbtn btn ok">保存外观</button>
      </div>
    </div>
  </div>

</div><!-- /.wrap -->

<!-- 可选：音频资源 -->
<audio id="beepAudio" src="bell.mp3" preload="auto"></audio>

<script>
/* ========== 页面切换 ========== */
const $=id=>document.getElementById(id);
function showPage(name){
  ['home','work','logs','settings'].forEach(p=>{
    const el=$('page-'+p); if(!el) return;
    if(p===name) el.classList.remove('hide'); else el.classList.add('hide');
  });
  document.querySelectorAll('#tabs .navbtn').forEach(b=>{
    if(b.dataset.page===name) b.classList.add('active'); else b.classList.remove('active');
  });
}
document.querySelectorAll('#tabs .navbtn').forEach(b=>{
  b.addEventListener('click',()=>showPage(b.dataset.page));
});
$('goWork')?.addEventListener('click',()=>showPage('work'));

/* ========== 双保险隐藏（防止运行时被别处显示） ========== */
function forceHideCloudLinkers(){
  ['btnVerify','btnPing'].forEach(id=>{
    const el=$(id);
    if(el){
      el.classList.add('hide-btn');
      el.style.display='none';
      el.setAttribute('aria-hidden','true');
    }
  });
}
document.addEventListener('DOMContentLoaded', forceHideCloudLinkers);
setTimeout(forceHideCloudLinkers, 50);
setTimeout(forceHideCloudLinkers, 500);

/* ========== 这里保持你的原有云端/日志/训练逻辑钩子（留空即可对齐样式） ========== */
// 示例：JSON 导入/导出按钮占位
$('btnReadJson')?.addEventListener('click',()=>{ /* TODO: 打开文件选择器并读取 */ });
$('btnSaveJson')?.addEventListener('click',()=>{ /* TODO: 导出当前配置到 JSON */ });

/* ========== 移动端额外修正（可选）统一按钮字体/内边距 ==========
   防止某些安卓浏览器把第二排字体渲染稍小导致“看起来不等高” */
function fixMobileButtons(){
  const btns = document.querySelectorAll('.leftgrp .gbtn');
  const cs = { fontSize:'14px', padding:'0 16px', lineHeight:'40px', height:'40px' };
  btns.forEach(btn=>{
    btn.style.fontSize = cs.fontSize;
    btn.style.padding = cs.padding;
    btn.style.lineHeight = cs.lineHeight;
    btn.style.height = cs.height;
  });
}
document.addEventListener('DOMContentLoaded', fixMobileButtons);
window.addEventListener('resize', fixMobileButtons);
setTimeout(fixMobileButtons, 100);
setTimeout(fixMobileButtons, 500);

</script>
</body>
</html>
